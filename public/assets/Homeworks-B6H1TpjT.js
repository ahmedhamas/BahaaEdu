import{_ as C,s as y,N as T,p as v,l as B,m as H,q as V,t as N,x as $,u as z,i as b,r as o,o as i,c as _,a as c,j as s,b as p,w as a,d as A,e as r,F as L,y as R,z as u}from"./index-xoV0-Lal.js";import{C as j}from"./Card-CRavKj_2.js";const S={name:"Homeworks",components:{Card:j,FwbPagination:y,FwbA:T,FwbTable:v,FwbTableBody:B,FwbTableCell:H,FwbTableHead:V,FwbTableHeadCell:N,FwbTableRow:$},data(){return{homeworks:[],results:[],limit:30,currentPage:1,totalPages:1,toast:z()}},mounted(){this.getHomeworks(),this.latestResults()},methods:{getHomeworks(){b.get(`/homeworks/all/${this.limit*this.currentPage}`,{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then(t=>{this.homeworks=t.data,this.totalPages=Math.ceil(t.data.length/this.limit)}).catch(t=>{t.response&&t.response.status===401&&(this.toast.error("خطأ: غير مصرح به"),this.$store.commit("logout"),this.$router.push("/login"))})},latestResults(){b.get("/homeworks/results",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{this.results=t.data}).catch(t=>{t.response&&t.response.status===401&&(this.toast.error("خطأ: غير مصرح به"),this.$store.commit("logout"),this.$router.push("/login"))})}}},q={class:"w-full grid place-items-center"},D={class:"homeworks mt-10 max-w-screen-xl px-4 sm:px-6 lg:px-8 flex flex-col gap-5"},E={class:"homeworks grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},I={class:"page-navigation w-full flex justify-center"};function M(t,e,U,G,l,g){const w=o("Card"),h=o("FwbPagination"),d=o("fwb-table-head-cell"),f=o("fwb-table-head"),m=o("fwb-table-cell"),x=o("fwb-table-row"),k=o("fwb-table-body"),F=o("fwb-table");return i(),_("main",q,[c("div",D,[e[4]||(e[4]=c("h2",{class:"text-xl font-bold mb-4"},"الواجبات",-1)),c("div",E,[s(w,{data:l.homeworks},null,8,["data"])]),c("div",I,[s(h,{dir:"ltr",class:"mt-4 mx-auto",modelValue:l.currentPage,"onUpdate:modelValue":e[0]||(e[0]=n=>l.currentPage=n),"total-pages":l.totalPages,onPageChange:g.getHomeworks,nextLabel:"التالي",previousLabel:"السابق"},null,8,["modelValue","total-pages","onPageChange"])]),l.results.length>0?(i(),p(F,{key:0},{default:a(()=>[s(f,null,{default:a(()=>[s(d,{class:"text-start"},{default:a(()=>e[1]||(e[1]=[r("رقم الواجب")])),_:1}),s(d,{class:"text-start"},{default:a(()=>e[2]||(e[2]=[r("العنوان")])),_:1}),s(d,{class:"text-start"},{default:a(()=>e[3]||(e[3]=[r("النتيجة")])),_:1})]),_:1}),s(k,null,{default:a(()=>[(i(!0),_(L,null,R(l.results,(n,P)=>(i(),p(x,{key:n.id},{default:a(()=>[s(m,{class:"text-start"},{default:a(()=>[r(u(P+1),1)]),_:2},1024),s(m,{class:"text-start"},{default:a(()=>[r(u(n.homework_name),1)]),_:2},1024),s(m,{class:"text-start"},{default:a(()=>[r(u(n.result),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):A("",!0)])])}const O=C(S,[["render",M]]);export{O as default};
