import{_ as m,u as p,i as l,r as g,o as a,c as u,j as b,a as o,z as c}from"./index-xoV0-Lal.js";import{Q as f,s as x}from"./shuffleArray-DvT5pwC-.js";const y={name:"QuestionsBank",components:{Question:f},data(){return{questions:[],question:{},currentPage:1,totalPages:1,toast:p()}},mounted(){this.getQuestions(),this.$store.dispatch("clearAnswers")},methods:{getQuestions(){l.get("/questions/bank",{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then(e=>{const s=e.data.map(r=>(Object.keys(r).forEach(t=>{r[t]===null&&delete r[t]}),r));this.questions=x(s),this.totalPages=this.questions.length,this.question=this.questions[0]}).catch(e=>{e.response&&e.response.status===401&&(this.toast.error("خطأ: غير مصرح به"),this.$store.commit("logout"),this.$router.push("/login"))})},ChangeQuestion(e){this.currentPage=e,this.question=this.questions[this.currentPage-1]},submitAnswers(){l.post("/questions",this.$store.state.answers,{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then(e=>{this.toast.success(e.data.message),this.toast.success(e.data.result),this.getQuestions()}).catch(e=>{e.response&&e.response.status===401&&(this.toast.error("خطأ: غير مصرح به"),this.$store.commit("logout"),this.$router.push("/login"))})}},watch:{currentPage(e){this.ChangeQuestion(e)}}},w={class:"w-full flex justify-center items-center flex-col gap-10"},_={key:0,class:"questions w-full px-4 flex flex-col gap-4 items-center justify-center max-w-3xl"},v={key:1,class:"questions w-full px-4 flex flex-col gap-4 items-center justify-center max-w-3xl"},k={class:"buttons flex flex-col gap-4 mt-10 w-full justify-center items-center"},P={class:"flex gap-4"},q=["disabled"],Q={class:"current-page p-2 rounded-md bg-primary text-white"},A=["disabled"];function C(e,s,r,d,t,n){const h=g("Question");return a(),u("div",w,[t.questions.length>0?(a(),u("div",_,[b(h,{question:t.question,index:t.currentPage},null,8,["question","index"])])):(a(),u("div",v," لا يوجد اسئلة ")),o("div",k,[o("div",P,[o("button",{class:"btn btn-primary border border-primary rounded-md p-2 hover:bg-primary hover:text-white duration-300 disabled:cursor-not-allowed disabled:opacity-50",onClick:s[0]||(s[0]=i=>n.ChangeQuestion(t.currentPage+1)),disabled:t.currentPage===t.totalPages}," التالي ",8,q),o("div",Q,c(t.currentPage)+" / "+c(t.totalPages),1),o("button",{class:"btn btn-primary border border-primary rounded-md p-2 hover:bg-primary hover:text-white duration-300 disabled:cursor-not-allowed disabled:opacity-50",onClick:s[1]||(s[1]=i=>n.ChangeQuestion(t.currentPage-1)),disabled:t.currentPage===1}," السابق ",8,A)]),o("button",{onClick:s[2]||(s[2]=(...i)=>n.submitAnswers&&n.submitAnswers(...i)),class:"btn btn-primary border bg-primary text-white rounded-md p-2 hover:bg-white hover:text-primary hover:border-primary duration-300 w-48"}," إرسال الاجابات ")])])}const z=m(y,[["render",C]]);export{z as default};
