import{_ as c,u as l,i as a,r as m,o as p,c as g,a as o,j as b,z as u}from"./index-xoV0-Lal.js";import{Q as w,s as f}from"./shuffleArray-DvT5pwC-.js";const y={name:"HomeworksQuestions",components:{Question:w},data(){return{homework:[],question:{},currentPage:1,totalPages:1,toast:l()}},mounted(){this.getHomework(),this.$store.dispatch("clearAnswers")},methods:{getHomework(){a.get(`/homeworks/${this.$route.params.id}`,{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then(e=>{const s=e.data.map(r=>(Object.keys(r).forEach(t=>{r[t]===null&&delete r[t]}),r));this.homework=f(s),this.totalPages=this.homework.length,this.question=this.homework[0]}).catch(e=>{e.response&&e.response.status===401&&(this.toast.error("خطأ: غير مصرح به"),this.$store.commit("logout"),this.$router.push("/login")),e.response.status===500&&(this.toast.error(e.response.data.error),this.$router.push("/dashboard"))})},ChangeQuestion(e){this.currentPage=e,this.question=this.homework[this.currentPage-1]},submitAnswers(){a.post(`/homeworks/${this.$route.params.id}`,this.$store.state.answers,{headers:{Authorization:`Bearer ${this.$store.state.token}`,"Content-Type":"application/json"}}).then(e=>{const s=e.data.message;this.toast.success(s),this.$router.push("/dashboard")}).catch(e=>{e.response&&e.response.status===401?(this.toast.error("خطأ: غير مصرح به"),this.$store.commit("logout"),this.$router.push("/login")):this.toast.error(e.response.error)})}},watch:{currentPage(e){this.ChangeQuestion(e)}}},x={class:"w-full flex justify-center items-center flex-col gap-10"},k={class:"questions w-full px-4 flex flex-col gap-4 items-center justify-center max-w-3xl"},_={class:"buttons flex flex-col gap-4 mt-10 w-full justify-center items-center"},v={class:"flex gap-4"},P=["disabled"],Q={class:"current-page p-2 rounded-md bg-primary text-white"},C=["disabled"];function $(e,s,r,h,t,i){const d=m("Question");return p(),g("div",x,[o("div",k,[b(d,{question:t.question,index:t.currentPage},null,8,["question","index"])]),o("div",_,[o("div",v,[o("button",{class:"btn btn-primary border border-primary rounded-md p-2 hover:bg-primary hover:text-white duration-300 disabled:cursor-not-allowed disabled:opacity-50",onClick:s[0]||(s[0]=n=>i.ChangeQuestion(t.currentPage+1)),disabled:t.currentPage===t.totalPages}," التالي ",8,P),o("div",Q,u(t.currentPage)+" / "+u(t.totalPages),1),o("button",{class:"btn btn-primary border border-primary rounded-md p-2 hover:bg-primary hover:text-white duration-300 disabled:cursor-not-allowed disabled:opacity-50",onClick:s[1]||(s[1]=n=>i.ChangeQuestion(t.currentPage-1)),disabled:t.currentPage===1}," السابق ",8,C)]),o("button",{onClick:s[2]||(s[2]=(...n)=>i.submitAnswers&&i.submitAnswers(...n)),class:"btn btn-primary border bg-primary text-white rounded-md p-2 hover:bg-white hover:text-primary hover:border-primary duration-300 w-48"}," إرسال الاجابات ")])])}const B=c(y,[["render",$]]);export{B as default};
